<!DOCTYPE html>
<html>
	<head>
		<script src="https://kit.fontawesome.com/39cab4bf95.js" crossorigin="anonymous"></script>
		<!--<link rel="stylesheet" type="text/css" href="../css/A.css">-->
		<title>Aniversary</title>
	</head>
	<body>
		<h1>Seu Aniversário...</h1>
		<div class="form">
			<input type="text" id="name" placeholder="Escreva seu nome Aqui">
			<label>Sua data de nascimento</label>
			<input type="date" id="datNas">
			<button class="btn" id="env" onclick="ver()">Enviar</button>
		</div>
		<p id="res"></p>
		<script type="text/javascript">
			function ver(){
				let date = document.querySelector('#datNas');
				if(date.value != ''){
					//pegando valor da input date
						let vl = date.valueAsDate; 
						let dt = [
							vl.getUTCDate(), //dia escrito no input 0
							vl.getUTCMonth() + 1, //mês escrito no input 1
							vl.getUTCFullYear() //ano escrito no input 2
						];
					
					//tempo atual
						const DateNow = Date.now();
						const dateNow = new Date(DateNow);
						const today = dateNow.toLocaleDateString();
						let [day, month, year] = today.split('/').map(Number);
					
					//verificando data
						//verificando mes 2-aniversário passou /1-está no aniversário /0-aniversario não passou
						var valMonth = 
							dt[1]>month? 
								2:(
									dt[1]<month?
										0:1
								);
						//verificando se já fez aniversario
						var valDay = 
							valMonth==2? 
								true:(
									valMonth==1? 
										(
											dt[0]>day? 
												true:(
													dt[0]<day? 
														false:true
													)
										):false
								);
						//calculo de idade
						const idade = 
							valDay==true? 
								(year-dt[2]):((year-1)-dt[2]);
					
					//mensagem final;
						let idadeMini = 5;
						let idadeMin = 10;
						let idadeMax = 95;
						//possibilidades de respostas
						let pRes = [
							idade+' anos!, Você nem nasceu >:(',
							idade+' anos!, Você nem saberia ler x-x',
							idade+' anos!, pela sua infância você não deveria está por aqui, ?-?',
							idade+' anos!, Você Bem provavelmente nem está vivo ._.'
						];
						let menssage = 
							idade < 0 ? 
								pRes[0]:(
									idade<idadeMin? 
										( 
											idade<idadeMini?
												pRes[1]:pRes[2]
										):(
											idade>idadeMax? 
												pRes[3]:true
										)
								);
					
					//felis aniversário?
					let Name = document.querySelector('#name').value;
					if (menssage==true){
						let verMonth = 
							dt[1]<month?
								(month-dt[1]):(
									dt[1]>month?
										(12+(dt[1]-month)):0
									);
						let verDay = 
							day>dt[0]?
								(day-dt[0]):(
										day<dt[0]?
											(30+(dt[0]-day)):0
									);

						let seg = [
							verDay>0? (verDay>1? verDay+' dias':'1 dia'):false,
							verMonth>0? (verMonth>1? verMonth+' meses':'1 mês'):false
						];
						
						let text = [
							seg[1]+' ou aproximadamente '+(30*verMonth)+' dias',
							seg[0],
							seg[1]+' e '+seg[0]+' ou aproximadamente '+(verDay+(30*verMonth))+' dias'
						];
						
						let textFinal = seg[0]==false? text[0]:(seg[1]==false? text[1]:text[2]);
						let pTxt = [
							'ainda falta '+textFinal,
							'!!!'+Name+' Parábens pelo seu aniversário de '+idade+' Anos!!!'
						];
						let calc = verDay + (30*verMonth);
						let resut = calc>0? pTxt[0]:pTxt[1];

						mens(resut);
					}else{
						mens(Name+', sério '+menssage);
					}
				}else{
					mens('preencha de forma Correta a Data');
				}
			}

			function mens(text){
				let div = document.querySelector('#res');
				div.innerHTML = text;
			}
		</script>
	</body>
</html>